<!doctype html>
<html>

	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>fastnotes</title>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>

	<body lang="en">
		<div id="charcount">0</div>
		<div id="textbox" contenteditable="true"></div>

		<script type="text/javascript" src="jquery-2.0.3.min.js"></script>
		<script type="text/javascript">

			// Globals
			var	$textBox 	= $("#textbox"),
				$charCount 	= $("#charcount");

    		function alertWindowClose(evt) {
    			// Only show popup message if the textbox is not empty
    			if ($textBox.text()) {
    				var msg = "If you leave this page, your notes will be lost.";
    				evt = evt || window.event;
    				if(evt)
       					evt.returnValue = msg;
    				return msg;
    			}
			};	

			function updateCharacterCount() {
				$charCount.text(function () {
					return $textBox.text().length;
				});
			};

			$(document).ready(function () {
				$(window).on("load", function () { 
					$textBox.focus();
				});
				$(window).on("beforeunload", alertWindowClose);
				$textBox.on("keyup", updateCharacterCount);
			});
		</script>
	</body>
</html>